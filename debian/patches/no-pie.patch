Description: Allows static linkage of fail-mbr
 Thanks to Matthias Klose for the patch
 .
 partclone (0.2.88-1ubuntu1) yakkety; urgency=medium
 .
   * Build statically linked fail-mbr.bin binary with -no-pie.
   * Configure with --disable-silent-rules.
Author: Matthias Klose <doko@ubuntu.com>

---
--- partclone-0.2.88.orig/fail-mbr/compile-mbr.sh
+++ partclone-0.2.88/fail-mbr/compile-mbr.sh
@@ -2,10 +2,10 @@
 if dpkg-architecture -e amd64 || dpkg-architecture -e i386; then
    # compile the file fail-mbr.bin
     echo -n "Compiling: fail-mbr.S -> fail-mbr.o -> "
-    gcc -Wall -Werror -m32 -nostdlib -o fail-mbr.o fail-mbr.S
+    gcc -no-pie -Wall -Werror -m32 -nostdlib -o fail-mbr.o fail-mbr.S
 
     echo -n "fail-mbr.image -> "
-    gcc -Os -Wall -W -Wshadow -Wpointer-arith -Wmissing-prototypes -Wundef -Wstrict-prototypes -g -falign-jumps=1 -falign-loops=1 -falign-functions=1 -mno-mmx -mno-sse -mno-sse2 -mno-3dnow -fno-dwarf2-cfi-asm -fno-asynchronous-unwind-tables -m32 -fno-stack-protector -mno-stack-arg-probe -Werror -Wno-trampolines -DUSE_ASCII_FAILBACK=1 -DHAVE_UNIFONT_WIDTHSPEC=1  -mrtd -mregparm=3       -fno-builtin   -m32 -Wl,--build-id=none   -nostdlib -Wl,-N,-S -Wl,-N -Wl,-Ttext,0x7C00   -o fail-mbr.image fail-mbr.o
+    gcc -no-pie -Os -Wall -W -Wshadow -Wpointer-arith -Wmissing-prototypes -Wundef -Wstrict-prototypes -g -falign-jumps=1 -falign-loops=1 -falign-functions=1 -mno-mmx -mno-sse -mno-sse2 -mno-3dnow -fno-dwarf2-cfi-asm -fno-asynchronous-unwind-tables -m32 -fno-stack-protector -mno-stack-arg-probe -Werror -Wno-trampolines -DUSE_ASCII_FAILBACK=1 -DHAVE_UNIFONT_WIDTHSPEC=1  -mrtd -mregparm=3       -fno-builtin   -m32 -Wl,--build-id=none   -nostdlib -Wl,-N,-S -Wl,-N -Wl,-Ttext,0x7C00   -o fail-mbr.image fail-mbr.o
 
     echo "fail-mbr.bin [Done]. "
     objcopy  -O binary  --strip-unneeded -R .note -R .comment -R .note.gnu.build-id -R .reginfo -R .rel.dyn fail-mbr.image fail-mbr.bin
